import{o as A}from"./omit.dc85ab0f.js";import{p as re}from"./pick.d40e2c96.js";import{C as Q}from"./index.b2f37694.js";import{d as F,h as y,j as Z,H as i,g as P,a4 as z,L as M,a3 as ie,x as ee,O as N}from"./framework.c15ea7b3.js";import{c as H,a as E}from"./type.8d15feec.js";import{a as se,E as ce}from"./index.2b1db2d5.js";import{w as W}from"./install.519a88e0.js";const te={defaultValue:{type:String},value:{type:String},bordered:{type:Boolean,default:!0},disabled:{type:Boolean},maxlength:{type:Number},autofocus:{type:Boolean}},de={clearable:{type:Boolean},clearIcon:{type:Object}},ne={addonBefore:{type:[String,Object]},addonAfter:{type:[String,Object]}},ae={prefix:{type:[String,Object]},suffix:{type:[String,Object]}},oe={...te,size:{type:String,default:"default"},type:{type:String}},pe=Object.keys(oe),J={...te,...de},fe={...ae,...ne,size:{type:String,default:"default"},type:{type:String},wordCount:{type:Boolean}},ge={autoSize:{type:[Boolean,Object]},wordCount:{type:Boolean}},he={...ne,size:{type:String,default:"default"},prefix:ae.prefix,wordCount:{type:Boolean},visible:{type:Boolean,default:!1},showToggle:{type:Boolean,default:!0},renderIcon:{type:Object}},ve={...J,...fe},be={...J,...ge},xe={...J,...he},ye=F({name:"BaseInput",props:oe,emits:["input","update:value","focus","blur","change"],setup(e,{emit:t,expose:a}){const o=y(),s=y(!1),u=r=>{s.value=!0,t("input",r),t("update:value",r.target.value)},f=r=>{t("focus",r)},c=r=>{t("blur",r),t("change",r.target.value)};return a({markInputChanged:()=>{s.value=!0},focus:()=>{o.value.focus()},blur:()=>{o.value.blur()},getInputElement:()=>o.value}),Z(()=>{e.autofocus&&o.value.focus()}),()=>{const{value:r,defaultValue:g,bordered:w,disabled:m,maxlength:B,size:I,type:C}=e;return i("input",{ref:o,class:{"j-input":!0,"j-input-borderless":!w,"j-input-disabled":m,[`j-input-${I}`]:I!=="default"},type:C,value:s.value?r:r===void 0?g:r,disabled:m,maxlength:B,onInput:u,onFocus:f,onBlur:c},null)}}}),ue=["update:value","input","change","focus","blur","clear"],$=F({name:"JInput",props:ve,inheritAttrs:!1,emits:ue,setup(e,{emit:t,slots:a,attrs:o,expose:s}){const u=y(),f=n=>{t("update:value",n)},c=P(()=>re(e,pe)),d=y(!1),r=n=>{t("focus",n),d.value=!0},g=n=>{t("blur",n),d.value=!1},w=n=>{t("update:value",""),t("change",""),t("input",{...n,target:u.value.getInputElement()}),t("clear"),u.value.markInputChanged(),u.value.focus()},m=y(!1),B=n=>{m.value=!0,t("input",n),t("update:value",n.target.value)},I=n=>{t("change",n)},C=P(()=>m.value?e.value:e.value||e.defaultValue),T=P(()=>!!C.value);s({focus:()=>{u.value.focus()},blur:()=>{u.value.blur()}});const V=n=>i(ye,M(n,c.value,{ref:u,"onUpdate:value":f,onFocus:r,onBlur:g,onInput:B,onChange:I}),null),l=n=>{var Y,K,X,q;const{prefix:h,suffix:v,clearable:b,clearIcon:p,disabled:S,size:D,wordCount:k,maxlength:U}=e,O=z(h)||H(h)?h:(Y=a.prefix)==null?void 0:Y.call(a),R=z(v)||H(v)?v:(K=a.suffix)==null?void 0:K.call(a),le=z(p)?p:(X=a.clearIcon)==null?void 0:X.call(a);return O||R||b||k?i("span",{class:{[n.class]:!!n.class,"j-input-affix-wrapper":!0,"j-input-affix-wrapper-focused":d.value,"j-input-affix-wrapper-disabled":S,"j-input-with-prefix":!!O,"j-input-with-suffix":!!R,[`j-input-affix-wrapper-${D}`]:D!=="default"},style:n.style},[O?i("span",{class:"j-input-prefix"},[O]):null,V(A(n,["class","style"])),R||b||k?i("span",{class:"j-input-suffix"},[b&&!S?i("span",{class:"j-input-clear-icon-wrapper",style:{visibility:T.value?"visible":"hidden"},onClick:w},[le||i(Q,{class:"j-input-clear-icon"},null)]):null,k?i("span",{class:"j-input-word-count"},[((q=C.value)==null?void 0:q.length)||0,U?`/${U}`:""]):null,R]):null]):V(n)},j=()=>{var p,S;const{addonBefore:n,addonAfter:h}=e,v=z(n)||H(n)?n:(p=a.addonBefore)==null?void 0:p.call(a),b=z(h)||H(h)?h:(S=a.addonAfter)==null?void 0:S.call(a);return v||b?i("span",{class:{[o.class]:!!o.class,"j-input-group":!0},style:o.style},[v?i("span",{class:"j-input-group-addon j-input-group-addon-before"},[v]):null,l(A(o,["class","style"])),b?i("span",{class:"j-input-group-addon j-input-group-addon-after"},[b]):null]):l(o)};return()=>j()}});let x=null;const we=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,me=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function je(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),s=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:me.map(f=>`${f}:${t.getPropertyValue(f)}`).join(";"),paddingSize:o,borderSize:s,boxSizing:a}}function Se(e,t=1,a=void 0){x||(x=document.createElement("textarea"),document.body.appendChild(x));const{paddingSize:o,borderSize:s,boxSizing:u,contextStyle:f}=je(e);x.setAttribute("style",`${f};${we}`),x.value=e.value||e.placeholder||"";let c=x.scrollHeight;const d={minHeight:"",height:""};u==="border-box"?c+=s:u==="content-box"&&(c-=o),x.value="";const r=x.scrollHeight-o;let g=r*t;if(u==="border-box"&&(g=g+o+s),c=Math.max(g,c),d.minHeight=`${g}px`,a!==void 0){let w=r*a;u==="border-box"&&(w=w+o+s),c=Math.min(w,c)}return d.height=`${c}px`,x.parentNode&&x.parentNode.removeChild(x),x=null,d}const G=e=>e.clientHeight!==e.scrollHeight,Ie=F({name:"JTextarea",props:be,inheritAttrs:!1,emits:ue,setup(e,{emit:t,slots:a,attrs:o}){const s=y(!1),u=l=>{s.value=!0,t("input",l),t("update:value",l.target.value)},f=l=>{t("focus",l)},c=l=>{t("blur",l),t("change",l.target.value)},d=y(),r=ie({}),g=y(!1),w=P(()=>e.autoSize===!0||E(e.autoSize)&&!e.autoSize.maxRows),m=()=>{e.autoSize?N(()=>{const l={minRows:1,maxRows:void 0};E(e.autoSize)&&(l.minRows=e.autoSize.minRows??1,l.maxRows=e.autoSize.maxRows??void 0),Object.assign(r,Se(d.value,l.minRows,l.maxRows)),N(()=>{g.value=G(d.value)})}):N(()=>{g.value=G(d.value)})};Z(()=>{m(),e.autofocus&&d.value.focus()}),ee(()=>e.value,()=>{m()});const B=l=>{t("update:value",""),t("change",""),t("input",{...l,target:d.value}),t("clear")},I=P(()=>s.value?e.value:e.value||e.defaultValue),C=P(()=>!!I.value),T=l=>{const{value:j,defaultValue:n,bordered:h,disabled:v,maxlength:b,autoSize:p}=e,S={resize:p?"none":"vertical",overflow:w.value?"hidden":"",minHeight:E(p)&&p.minRows?r.minHeight:""};return p&&(S.height=r.height),i("textarea",M(l,{ref:d,class:{"j-input":!0,"j-input-textarea":!0,"j-input-borderless":!h,"j-input-disabled":v},style:S,value:s.value?j:j===void 0?n:j,disabled:v,maxlength:b,onInput:u,onFocus:f,onBlur:c}),null)},V=()=>{var b,p;const{clearable:l,clearIcon:j,wordCount:n,maxlength:h}=e,v=z(j)?j:(b=a.clearIcon)==null?void 0:b.call(a);return l||n?i("span",{class:{[o.class]:!!o.class,"j-input-affix-wrapper":!0,"j-input-affix-wrapper-textarea-with-clear-icon":!0,"j-input-affix-wrapper-textarea-with-clear-icon-scroll":g.value,"j-input-affix-wrapper-textarea-with-word-count":n},"data-word-count":n?`${((p=I.value)==null?void 0:p.length)||0}${h?`/${h}`:""}`:"",style:o.style},[T(A(o,["class","style"])),l?i("span",{class:"j-input-clear-icon-wrapper",style:{visibility:C.value?"visible":"hidden"},onClick:B},[v||i(Q,{class:"j-input-clear-icon"},null)]):null]):T(o)};return()=>V()}}),Ce=F({name:"JPassword",props:xe,emits:["update:visible"],setup(e,{emit:t,attrs:a,slots:o}){const s=y(),u=y(e.visible||!1);ee(()=>e.visible,c=>{u.value=c});const f=()=>{u.value=!u.value,t("update:visible",!e.visible),N(()=>{s.value.focus()})};return()=>i($,M(a,e,{ref:s,type:e.showToggle&&u.value?"text":"password"}),{...o,suffix:e.showToggle?()=>i("span",{class:{"j-password-icon-wrapper":!0},onClick:f},[o.renderIcon?o.renderIcon(u.value):u.value?i(se,null,null):i(ce,null,null)]):void 0})}}),_=W(Ie),L=W(Ce);$.Textarea=_;$.Password=L;const He=W($,e=>{e.component(_.name,_),e.component(L.name,L)});export{He as I,L as P,_ as T,ne as a,de as c};
