import{l as q,g as F,h as N,E as Ie,x as ie,a8 as Xe,a9 as Ye,aa as U,d as Ge,M as Ue,W as qe,j as ke,a6 as Ke,H as I,ab as Je,F as Qe,a4 as Me,a2 as Ze,a7 as et}from"./framework.bf0d9ef3.js";import{j as tt}from"./omit.dc85ab0f.js";import{d as nt,c as ot}from"./type.8d15feec.js";import{u as it}from"./dom.c77f962b.js";const Ne={disabled:{type:Boolean},placement:{type:String,default:"bottom"},open:{type:Boolean,default:void 0},getPopupContainer:{type:Function,default:()=>document.body},destroyWhenHide:{type:Boolean},mouseEnterDelay:{type:Number,default:.1},mouseLeaveDelay:{type:Number,default:.1},overlayClassName:{type:String},overlayStyle:{type:Object},overlayInnerStyle:{type:Object},overlayColor:{type:String},trigger:{type:String,default:"hover"},arrowVisible:{type:Boolean,default:!0},offsetOption:{type:[Number,Object,Function],default:12}},Ut=Object.keys(Ne),rt={...Ne,content:{type:[String,Object]},widgetName:{type:String,default:"floating"},disableClose:{type:Boolean},useReferenceWidth:{type:Boolean}},st=["top","right","bottom","left"],J=Math.min,X=Math.max,re=Math.round,oe=Math.floor,H=e=>({x:e,y:e}),lt={left:"right",right:"left",bottom:"top",top:"bottom"},ct={start:"end",end:"start"};function de(e,t,n){return X(e,J(t,n))}function Z(e,t){return typeof e=="function"?e(t):e}function Y(e){return e.split("-")[0]}function te(e){return e.split("-")[1]}function Fe(e){return e==="x"?"y":"x"}function he(e){return e==="y"?"height":"width"}function ae(e){return["top","bottom"].includes(Y(e))?"y":"x"}function pe(e){return Fe(ae(e))}function at(e,t,n){n===void 0&&(n=!1);const o=te(e),i=pe(e),r=he(i);let s=i==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(s=se(s)),[s,se(s)]}function ft(e){const t=se(e);return[me(e),t,me(t)]}function me(e){return e.replace(/start|end/g,t=>ct[t])}function ut(e,t,n){const o=["left","right"],i=["right","left"],r=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:o:t?o:i;case"left":case"right":return t?r:s;default:return[]}}function dt(e,t,n,o){const i=te(e);let r=ut(Y(e),n==="start",o);return i&&(r=r.map(s=>s+"-"+i),t&&(r=r.concat(r.map(me)))),r}function se(e){return e.replace(/left|right|bottom|top/g,t=>lt[t])}function mt(e){return{top:0,right:0,bottom:0,left:0,...e}}function De(e){return typeof e!="number"?mt(e):{top:e,right:e,bottom:e,left:e}}function le(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function Ce(e,t,n){let{reference:o,floating:i}=e;const r=ae(t),s=pe(t),l=he(s),a=Y(t),c=r==="y",d=o.x+o.width/2-i.width/2,m=o.y+o.height/2-i.height/2,p=o[l]/2-i[l]/2;let f;switch(a){case"top":f={x:d,y:o.y-i.height};break;case"bottom":f={x:d,y:o.y+o.height};break;case"right":f={x:o.x+o.width,y:m};break;case"left":f={x:o.x-i.width,y:m};break;default:f={x:o.x,y:o.y}}switch(te(t)){case"start":f[s]-=p*(n&&c?-1:1);break;case"end":f[s]+=p*(n&&c?-1:1);break}return f}const gt=async(e,t,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:r=[],platform:s}=n,l=r.filter(Boolean),a=await(s.isRTL==null?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:m}=Ce(c,o,a),p=o,f={},u=0;for(let h=0;h<l.length;h++){const{name:w,fn:y}=l[h],{x,y:b,data:O,reset:C}=await y({x:d,y:m,initialPlacement:o,placement:p,strategy:i,middlewareData:f,rects:c,platform:s,elements:{reference:e,floating:t}});if(d=x??d,m=b??m,f={...f,[w]:{...f[w],...O}},C&&u<=50){u++,typeof C=="object"&&(C.placement&&(p=C.placement),C.rects&&(c=C.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):C.rects),{x:d,y:m}=Ce(c,p,a)),h=-1;continue}}return{x:d,y:m,placement:p,strategy:i,middlewareData:f}};async function ce(e,t){var n;t===void 0&&(t={});const{x:o,y:i,platform:r,rects:s,elements:l,strategy:a}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:p=!1,padding:f=0}=Z(t,e),u=De(f),w=l[p?m==="floating"?"reference":"floating":m],y=le(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(w)))==null||n?w:w.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:c,rootBoundary:d,strategy:a})),x=m==="floating"?{...s.floating,x:o,y:i}:s.reference,b=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),O=await(r.isElement==null?void 0:r.isElement(b))?await(r.getScale==null?void 0:r.getScale(b))||{x:1,y:1}:{x:1,y:1},C=le(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:x,offsetParent:b,strategy:a}):x);return{top:(y.top-C.top+u.top)/O.y,bottom:(C.bottom-y.bottom+u.bottom)/O.y,left:(y.left-C.left+u.left)/O.x,right:(C.right-y.right+u.right)/O.x}}const ht=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:i,rects:r,platform:s,elements:l,middlewareData:a}=t,{element:c,padding:d=0}=Z(e,t)||{};if(c==null)return{};const m=De(d),p={x:n,y:o},f=pe(i),u=he(f),h=await s.getDimensions(c),w=f==="y",y=w?"top":"left",x=w?"bottom":"right",b=w?"clientHeight":"clientWidth",O=r.reference[u]+r.reference[f]-p[f]-r.floating[u],C=p[f]-r.reference[f],R=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let v=R?R[b]:0;(!v||!await(s.isElement==null?void 0:s.isElement(R)))&&(v=l.floating[b]||r.floating[u]);const L=O/2-C/2,M=v/2-h[u]/2-1,$=J(m[y],M),B=J(m[x],M),T=$,j=v-h[u]-B,A=v/2-h[u]/2+L,P=de(T,A,j),g=!a.arrow&&te(i)!=null&&A!=P&&r.reference[u]/2-(A<T?$:B)-h[u]/2<0,E=g?A<T?A-T:A-j:0;return{[f]:p[f]+E,data:{[f]:P,centerOffset:A-P-E,...g&&{alignmentOffset:E}},reset:g}}}),pt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:i,middlewareData:r,rects:s,initialPlacement:l,platform:a,elements:c}=t,{mainAxis:d=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:u="none",flipAlignment:h=!0,...w}=Z(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const y=Y(i),x=Y(l)===l,b=await(a.isRTL==null?void 0:a.isRTL(c.floating)),O=p||(x||!h?[se(l)]:ft(l));!p&&u!=="none"&&O.push(...dt(l,h,u,b));const C=[l,...O],R=await ce(t,w),v=[];let L=((o=r.flip)==null?void 0:o.overflows)||[];if(d&&v.push(R[y]),m){const T=at(i,s,b);v.push(R[T[0]],R[T[1]])}if(L=[...L,{placement:i,overflows:v}],!v.every(T=>T<=0)){var M,$;const T=(((M=r.flip)==null?void 0:M.index)||0)+1,j=C[T];if(j)return{data:{index:T,overflows:L},reset:{placement:j}};let A=($=L.filter(P=>P.overflows[0]<=0).sort((P,g)=>P.overflows[1]-g.overflows[1])[0])==null?void 0:$.placement;if(!A)switch(f){case"bestFit":{var B;const P=(B=L.map(g=>[g.placement,g.overflows.filter(E=>E>0).reduce((E,z)=>E+z,0)]).sort((g,E)=>g[1]-E[1])[0])==null?void 0:B[0];P&&(A=P);break}case"initialPlacement":A=l;break}if(i!==A)return{reset:{placement:A}}}return{}}}};function Oe(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ee(e){return st.some(t=>e[t]>=0)}const yt=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:o="referenceHidden",...i}=Z(e,t);switch(o){case"referenceHidden":{const r=await ce(t,{...i,elementContext:"reference"}),s=Oe(r,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:Ee(s)}}}case"escaped":{const r=await ce(t,{...i,altBoundary:!0}),s=Oe(r,n.floating);return{data:{escapedOffsets:s,escaped:Ee(s)}}}default:return{}}}}};async function vt(e,t){const{placement:n,platform:o,elements:i}=e,r=await(o.isRTL==null?void 0:o.isRTL(i.floating)),s=Y(n),l=te(n),a=ae(n)==="y",c=["left","top"].includes(s)?-1:1,d=r&&a?-1:1,m=Z(t,e);let{mainAxis:p,crossAxis:f,alignmentAxis:u}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return l&&typeof u=="number"&&(f=l==="end"?u*-1:u),a?{x:f*d,y:p*c}:{x:p*c,y:f*d}}const wt=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:o}=t,i=await vt(t,e);return{x:n+i.x,y:o+i.y,data:i}}}},xt=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:i}=t,{mainAxis:r=!0,crossAxis:s=!1,limiter:l={fn:w=>{let{x:y,y:x}=w;return{x:y,y:x}}},...a}=Z(e,t),c={x:n,y:o},d=await ce(t,a),m=ae(Y(i)),p=Fe(m);let f=c[p],u=c[m];if(r){const w=p==="y"?"top":"left",y=p==="y"?"bottom":"right",x=f+d[w],b=f-d[y];f=de(x,f,b)}if(s){const w=m==="y"?"top":"left",y=m==="y"?"bottom":"right",x=u+d[w],b=u-d[y];u=de(x,u,b)}const h=l.fn({...t,[p]:f,[m]:u});return{...h,data:{x:h.x-n,y:h.y-o}}}}};function _(e){return Be(e)?(e.nodeName||"").toLowerCase():"#document"}function S(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function W(e){var t;return(t=(Be(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Be(e){return e instanceof Node||e instanceof S(e).Node}function V(e){return e instanceof Element||e instanceof S(e).Element}function D(e){return e instanceof HTMLElement||e instanceof S(e).HTMLElement}function Re(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof S(e).ShadowRoot}function ne(e){const{overflow:t,overflowX:n,overflowY:o,display:i}=k(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(i)}function bt(e){return["table","td","th"].includes(_(e))}function ye(e){const t=ve(),n=k(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function Ct(e){let t=Q(e);for(;D(t)&&!fe(t);){if(ye(t))return t;t=Q(t)}return null}function ve(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function fe(e){return["html","body","#document"].includes(_(e))}function k(e){return S(e).getComputedStyle(e)}function ue(e){return V(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Q(e){if(_(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Re(e)&&e.host||W(e);return Re(t)?t.host:t}function Ve(e){const t=Q(e);return fe(t)?e.ownerDocument?e.ownerDocument.body:e.body:D(t)&&ne(t)?t:Ve(t)}function ee(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Ve(e),r=i===((o=e.ownerDocument)==null?void 0:o.body),s=S(i);return r?t.concat(s,s.visualViewport||[],ne(i)?i:[],s.frameElement&&n?ee(s.frameElement):[]):t.concat(i,ee(i,[],n))}function We(e){const t=k(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const i=D(e),r=i?e.offsetWidth:n,s=i?e.offsetHeight:o,l=re(n)!==r||re(o)!==s;return l&&(n=r,o=s),{width:n,height:o,$:l}}function we(e){return V(e)?e:e.contextElement}function K(e){const t=we(e);if(!D(t))return H(1);const n=t.getBoundingClientRect(),{width:o,height:i,$:r}=We(t);let s=(r?re(n.width):n.width)/o,l=(r?re(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!l||!Number.isFinite(l))&&(l=1),{x:s,y:l}}const Ot=H(0);function $e(e){const t=S(e);return!ve()||!t.visualViewport?Ot:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Et(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==S(e)?!1:t}function G(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),r=we(e);let s=H(1);t&&(o?V(o)&&(s=K(o)):s=K(e));const l=Et(r,n,o)?$e(r):H(0);let a=(i.left+l.x)/s.x,c=(i.top+l.y)/s.y,d=i.width/s.x,m=i.height/s.y;if(r){const p=S(r),f=o&&V(o)?S(o):o;let u=p.frameElement;for(;u&&o&&f!==p;){const h=K(u),w=u.getBoundingClientRect(),y=k(u),x=w.left+(u.clientLeft+parseFloat(y.paddingLeft))*h.x,b=w.top+(u.clientTop+parseFloat(y.paddingTop))*h.y;a*=h.x,c*=h.y,d*=h.x,m*=h.y,a+=x,c+=b,u=S(u).frameElement}}return le({width:d,height:m,x:a,y:c})}function Rt(e){let{rect:t,offsetParent:n,strategy:o}=e;const i=D(n),r=W(n);if(n===r)return t;let s={scrollLeft:0,scrollTop:0},l=H(1);const a=H(0);if((i||!i&&o!=="fixed")&&((_(n)!=="body"||ne(r))&&(s=ue(n)),D(n))){const c=G(n);l=K(n),a.x=c.x+n.clientLeft,a.y=c.y+n.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-s.scrollLeft*l.x+a.x,y:t.y*l.y-s.scrollTop*l.y+a.y}}function At(e){return Array.from(e.getClientRects())}function He(e){return G(W(e)).left+ue(e).scrollLeft}function Tt(e){const t=W(e),n=ue(e),o=e.ownerDocument.body,i=X(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),r=X(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let s=-n.scrollLeft+He(e);const l=-n.scrollTop;return k(o).direction==="rtl"&&(s+=X(t.clientWidth,o.clientWidth)-i),{width:i,height:r,x:s,y:l}}function St(e,t){const n=S(e),o=W(e),i=n.visualViewport;let r=o.clientWidth,s=o.clientHeight,l=0,a=0;if(i){r=i.width,s=i.height;const c=ve();(!c||c&&t==="fixed")&&(l=i.offsetLeft,a=i.offsetTop)}return{width:r,height:s,x:l,y:a}}function Lt(e,t){const n=G(e,!0,t==="fixed"),o=n.top+e.clientTop,i=n.left+e.clientLeft,r=D(e)?K(e):H(1),s=e.clientWidth*r.x,l=e.clientHeight*r.y,a=i*r.x,c=o*r.y;return{width:s,height:l,x:a,y:c}}function Ae(e,t,n){let o;if(t==="viewport")o=St(e,n);else if(t==="document")o=Tt(W(e));else if(V(t))o=Lt(t,n);else{const i=$e(e);o={...t,x:t.x-i.x,y:t.y-i.y}}return le(o)}function _e(e,t){const n=Q(e);return n===t||!V(n)||fe(n)?!1:k(n).position==="fixed"||_e(n,t)}function Pt(e,t){const n=t.get(e);if(n)return n;let o=ee(e,[],!1).filter(l=>V(l)&&_(l)!=="body"),i=null;const r=k(e).position==="fixed";let s=r?Q(e):e;for(;V(s)&&!fe(s);){const l=k(s),a=ye(s);!a&&l.position==="fixed"&&(i=null),(r?!a&&!i:!a&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ne(s)&&!a&&_e(e,s))?o=o.filter(d=>d!==s):i=l,s=Q(s)}return t.set(e,o),o}function kt(e){let{element:t,boundary:n,rootBoundary:o,strategy:i}=e;const s=[...n==="clippingAncestors"?Pt(t,this._c):[].concat(n),o],l=s[0],a=s.reduce((c,d)=>{const m=Ae(t,d,i);return c.top=X(m.top,c.top),c.right=J(m.right,c.right),c.bottom=J(m.bottom,c.bottom),c.left=X(m.left,c.left),c},Ae(t,l,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Mt(e){return We(e)}function Nt(e,t,n){const o=D(t),i=W(t),r=n==="fixed",s=G(e,!0,r,t);let l={scrollLeft:0,scrollTop:0};const a=H(0);if(o||!o&&!r)if((_(t)!=="body"||ne(i))&&(l=ue(t)),o){const c=G(t,!0,r,t);a.x=c.x+t.clientLeft,a.y=c.y+t.clientTop}else i&&(a.x=He(i));return{x:s.left+l.scrollLeft-a.x,y:s.top+l.scrollTop-a.y,width:s.width,height:s.height}}function Te(e,t){return!D(e)||k(e).position==="fixed"?null:t?t(e):e.offsetParent}function je(e,t){const n=S(e);if(!D(e))return n;let o=Te(e,t);for(;o&&bt(o)&&k(o).position==="static";)o=Te(o,t);return o&&(_(o)==="html"||_(o)==="body"&&k(o).position==="static"&&!ye(o))?n:o||Ct(e)||n}const Ft=async function(e){let{reference:t,floating:n,strategy:o}=e;const i=this.getOffsetParent||je,r=this.getDimensions;return{reference:Nt(t,await i(n),o),floating:{x:0,y:0,...await r(n)}}};function Dt(e){return k(e).direction==="rtl"}const Bt={convertOffsetParentRelativeRectToViewportRelativeRect:Rt,getDocumentElement:W,getClippingRect:kt,getOffsetParent:je,getElementRects:Ft,getClientRects:At,getDimensions:Mt,getScale:K,isElement:V,isRTL:Dt};function Vt(e,t){let n=null,o;const i=W(e);function r(){clearTimeout(o),n&&n.disconnect(),n=null}function s(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),r();const{left:c,top:d,width:m,height:p}=e.getBoundingClientRect();if(l||t(),!m||!p)return;const f=oe(d),u=oe(i.clientWidth-(c+m)),h=oe(i.clientHeight-(d+p)),w=oe(c),x={rootMargin:-f+"px "+-u+"px "+-h+"px "+-w+"px",threshold:X(0,J(1,a))||1};let b=!0;function O(C){const R=C[0].intersectionRatio;if(R!==a){if(!b)return s();R?s(!1,R):o=setTimeout(()=>{s(!1,1e-7)},100)}b=!1}try{n=new IntersectionObserver(O,{...x,root:i.ownerDocument})}catch{n=new IntersectionObserver(O,x)}n.observe(e)}return s(!0),r}function Wt(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=o,c=we(e),d=i||r?[...c?ee(c):[],...ee(t)]:[];d.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),r&&y.addEventListener("resize",n)});const m=c&&l?Vt(c,n):null;let p=-1,f=null;s&&(f=new ResizeObserver(y=>{let[x]=y;x&&x.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{f&&f.observe(t)})),n()}),c&&!a&&f.observe(c),f.observe(t));let u,h=a?G(e):null;a&&w();function w(){const y=G(e);h&&(y.x!==h.x||y.y!==h.y||y.width!==h.width||y.height!==h.height)&&n(),h=y,u=requestAnimationFrame(w)}return n(),()=>{d.forEach(y=>{i&&y.removeEventListener("scroll",n),r&&y.removeEventListener("resize",n)}),m&&m(),f&&f.disconnect(),f=null,a&&cancelAnimationFrame(u)}}const $t=(e,t,n)=>{const o=new Map,i={platform:Bt,...n},r={...i.platform,_c:o};return gt(e,t,{...i,platform:r})};function ge(e){var t;return(t=e==null?void 0:e.$el)!=null?t:e}function Ht(e){return{name:"arrow",options:e,fn(t){const n=ge(q(e.element));return n==null?{}:ht({element:n,padding:e.padding}).fn(t)}}}function ze(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Se(e,t){const n=ze(e);return Math.round(t*n)/n}function _t(e,t,n){n===void 0&&(n={});const o=n.whileElementsMounted,i=F(()=>{var v;return(v=q(n.open))!=null?v:!0}),r=F(()=>q(n.middleware)),s=F(()=>{var v;return(v=q(n.placement))!=null?v:"bottom"}),l=F(()=>{var v;return(v=q(n.strategy))!=null?v:"absolute"}),a=F(()=>{var v;return(v=q(n.transform))!=null?v:!0}),c=F(()=>ge(e.value)),d=F(()=>ge(t.value)),m=N(0),p=N(0),f=N(l.value),u=N(s.value),h=Ie({}),w=N(!1),y=F(()=>{const v={position:f.value,left:"0",top:"0"};if(!d.value)return v;const L=Se(d.value,m.value),M=Se(d.value,p.value);return a.value?{...v,transform:"translate("+L+"px, "+M+"px)",...ze(d.value)>=1.5&&{willChange:"transform"}}:{position:f.value,left:L+"px",top:M+"px"}});let x;function b(){c.value==null||d.value==null||$t(c.value,d.value,{middleware:r.value,placement:s.value,strategy:l.value}).then(v=>{m.value=v.x,p.value=v.y,f.value=v.strategy,u.value=v.placement,h.value=v.middlewareData,w.value=!0})}function O(){typeof x=="function"&&(x(),x=void 0)}function C(){if(O(),o===void 0){b();return}if(c.value!=null&&d.value!=null){x=o(c.value,d.value,b);return}}function R(){i.value||(w.value=!1)}return ie([r,s,l],b,{flush:"sync"}),ie([c,d],C,{flush:"sync"}),ie(i,R,{flush:"sync"}),Xe()&&Ye(O),{x:U(m),y:U(p),strategy:U(f),placement:U(u),middlewareData:U(h),isPositioned:U(w),floatingStyles:y,update:b}}const Le=e=>{const{timeout:t,cb:n,autoStart:o=!1}=e;let i;const r=()=>{i&&clearTimeout(i)},s=()=>{i=setTimeout(()=>{r(),n()},t)};return o&&s(),{removeTimer:r,startTimer:s}};function jt(e){const{el:t,cb:n,getIgnoreElements:o}=e,i=r=>{!t.contains(r.target)&&(!o||o&&o().filter(s=>!!s).every(s=>!s.contains(r.target)))&&n(r)};return window.addEventListener("click",i),{clean:()=>window.removeEventListener("click",i)}}const Pe=Symbol("floatingContext");function zt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Me(e)}const qt=Ge({props:rt,emits:["update:open"],setup(e,{slots:t,emit:n,expose:o}){const i=Ue(Pe),r=N(),s=N(),l=N(),a=F(()=>{var g;return((g=r.value)==null?void 0:g.$el)||r.value}),{floatingStyles:c,middlewareData:d,placement:m}=_t(r,s,{middleware:[wt(e.offsetOption),xt(),pt(),Ht({element:l}),yt()],whileElementsMounted:Wt,placement:e.placement}),p=N(e.open||!1),f=F(()=>e.open!==void 0?e.open:p.value),u=N(f.value);ie(f,g=>{g&&(u.value=!0)});const h=g=>{e.disableClose&&g===!1||(p.value=g,n("update:open",g))},w=()=>{h(!1)},{startTimer:y,removeTimer:x}=Le({timeout:e.mouseEnterDelay*1e3,cb:()=>{h(!0)}}),{startTimer:b,removeTimer:O}=Le({timeout:e.mouseLeaveDelay*1e3,cb:()=>{h(!1)}}),C=()=>{e.trigger==="hover"&&(O(),y())},R=()=>{e.trigger==="hover"&&(x(),b())},v=()=>{e.trigger==="hover"&&(O(),i==null||i.onEnterChild())},L=()=>{e.trigger==="hover"&&(i==null||i.onLeaveChild(),b())},M=()=>{e.trigger==="click"&&h(!f.value)};i==null||i.onChildGetIgnoreElements(()=>[s.value,r.value]);const $=[];qe(Pe,{onEnterChild:()=>{O(),i==null||i.onEnterChild()},onLeaveChild:()=>{b(),i==null||i.onLeaveChild()},onChildGetIgnoreElements:g=>{$.push(g),i==null||i.onChildGetIgnoreElements(g)}});let B;ke(()=>{if(e.trigger==="click"&&a.value){const{clean:g}=jt({el:a.value,cb:()=>{h(!1)},getIgnoreElements:()=>[...tt($.map(z=>z())),s.value]});B=g}}),Ke(()=>{e.trigger==="click"&&nt(B)&&B()});const T=g=>{if(g){if(g.length===1){const E=g[0];return E.type===Ze?I("span",{ref:r,onMouseenter:C,onMouseleave:R,onClick:M},[E]):et(E,{ref:r,onMouseenter:C,onMouseleave:R,onClick:M})}}else return null},j=()=>{var g;return ot(e.content)?I("span",{class:`j-${e.widgetName}-title`},[e.content]):Me(e.content)?e.content:(g=t.content)==null?void 0:g.call(t)},{rectData:A}=it({getElement:()=>{var g;return((g=r.value)==null?void 0:g.$el)||r.value},observe:!0}),P=()=>{var E;const g=d.value.arrow;return!u.value||e.destroyWhenHide&&f.value===!1?null:I("div",{class:{[`j-${e.widgetName}`]:!0,[`j-${e.widgetName}-placement-${m.value}`]:!0,[e.overlayClassName||""]:!!e.overlayClassName},ref:s,style:{...e.overlayStyle||{},...c.value,display:f.value?"block":"none",[`--j-${e.widgetName}-arrow-bgcolor`]:e.overlayColor,visibility:(E=d.value.hide)!=null&&E.referenceHidden?"hidden":"visible",minWidth:e.useReferenceWidth?`${A.width}px`:void 0},onMouseenter:v,onMouseleave:L},[I("div",{class:`j-${e.widgetName}-inner`,style:e.overlayInnerStyle||{}},[j()]),e.arrowVisible?I("div",{class:`j-${e.widgetName}-arrow`,ref:l,style:{position:"absolute",left:g&&g.x!=null?`${g.x}px`:"",top:g&&g.y!=null?`${g.y}px`:""}},null):null])};return o({close:w}),()=>{var be;let g;const{disabled:E,getPopupContainer:z}=e,xe=z==null?void 0:z();return I(Qe,null,[T((be=t.default)==null?void 0:be.call(t)),E?null:I(Je,{to:xe,disabled:!xe},zt(g=P())?g:{default:()=>[g]})])}}}),Kt=()=>{const e=N(!1);return ke(()=>{e.value=!0}),{mounted:e}};export{qt as F,Ut as a,Ne as b,Kt as u};
